import { readFileSync, writeFileSync } from "fs";
import { join } from "path";

function embedAsBase64(path: string): string {
  const buffer = readFileSync(path);
  return buffer.toString("base64");
}

const assetsDir = join(import.meta.dirname, "..", "assets");

const DEMO_PNG_BASE64 = embedAsBase64(join(assetsDir, "image.png"));
const DEMO_JPG_BASE64 = embedAsBase64(join(assetsDir, "image.jpg"));

const output = `// AUTO-GENERATED FILE - DO NOT EDIT
// Generated by: bun run gen

export const DEMO_PNG_BASE64 = "${DEMO_PNG_BASE64}";
export const DEMO_JPG_BASE64 = "${DEMO_JPG_BASE64}";
`;

writeFileSync(join(import.meta.dirname, "..", "gen.embedded.ts"), output);
console.log("Generated gen.embedded.ts");
