---
type Info = "done" | "partial" | "todo" | "improvement";

type Props = {
  name: string;
  info: Info;
  details: string;
  isLast?: boolean;
};

const { name, info, details, isLast = false } = Astro.props;

const infoSymbols: Record<Info, string> = {
  done: "✓",
  partial: "~",
  todo: "✗",
  improvement: "↑",
};

const infoColors: Record<Info, string> = {
  done: "bg-green-600",
  partial: "bg-purple-600",
  todo: "bg-red-600",
  improvement: "bg-blue-600",
};

const rowClass = [
  "block",
  "p-1",
  "md:grid",
  "md:grid-cols-10",
  "md:p-0",
  isLast ? "" : "border-b-2 border-gray-500",
]
  .filter(Boolean)
  .join(" ");

const infoCellClass = [
  "inline-flex",
  "items-center",
  "p-0",
  "border-l-0",
  "md:mr-0",
  "md:col-span-1",
  "md:border-l-2",
  "md:border-gray-500",
  "md:px-2",
  "md:py-1",
  "md:block",
].join(" ");

const infoBadgeClass = [
  "h-4",
  "w-4",
  "rounded-[3px]",
  "text-[13px]",
  "font-semibold",
  "text-white",
  "flex",
  "items-center",
  "justify-center",
  infoColors[info],
].join(" ");
---

<div class={rowClass}>
  <div
    class="inline-flex items-center p-0 text-[13px] text-gray-900 md:mr-0 md:col-span-2 md:block md:px-2 md:py-1"
  >
    {name}
  </div>
  <div class={infoCellClass}>
    <div class={infoBadgeClass}>{infoSymbols[info]}</div>
  </div>
  <span
    class="inline p-0 text-[13px] text-gray-600 border-l-0 border-t-0 md:col-span-7 md:border-l-2 md:border-gray-500 md:block md:px-2 md:py-1"
  >
    {details}
  </span>
</div>
